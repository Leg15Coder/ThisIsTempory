{% extends "base.html" %}
{% block content %}
<script src="{{ url_for('static', path='js/index.js') }}" defer></script>
<h1>{{main_text}}</h1>
<div class="cards-container" id="cardsContainer"></div>

<div class="modal" id="modal">
    <div class="modal-content">
        <h2 class="modal-title" id="modalTitle"><span class="sr-only">Подробности квеста</span></h2>
        <div class="modal-author" id="modalAuthor"></div>
        <div class="modal-deadline" id="modalDeadline"></div>
        <p class="modal-text" id="modalText"></p>
        <span class="modal-type" id="modalType"></span>
    </div>
</div>

<!-- Основные элементы управления (в углу страницы) -->
<form action="{{post_url}}" method="post" id="fastSortForm">
    <div class="quick-controls">
        <label for="quickSort" class="sr-only">Сортировка</label>
        <select id="quickSort" class="pixel-select small select-modern" name="sort_type">
            <option value="created-desc">Сначала новые</option>
            <option value="deadline-asc">Ближайшие дедлайны</option>
            <option value="title-asc">А-Я</option>
            <option value="rarity-desc">Сначала сложные</option>
        </select>
        <label for="quickSearch" class="sr-only">Поиск</label>
        <input type="text" id="quickSearch" placeholder="Найти..." class="pixel-input small input-modern" name="find">
        <button id="openAdvancedFilters" class="pixel-button small" type="button">⚙️</button>
    </div>
</form>

<!-- Модальное окно расширенной фильтрации -->
<div class="modal" id="filtersModal">
    <div class="modal-content">
        <h2 class="modal-title">Расширенные фильтры</h2>

        <div class="filters-section">
            <h3>Сортировка</h3>
            <div class="filter-row">
                <label for="advSortBy">Критерий:</label>
                <select id="advSortBy" class="pixel-select select-modern">
                    <option value="created">Дата создания</option>
                    <option value="deadline">Дедлайн</option>
                    <option value="title">Название</option>
                    <option value="rarity">Редкость</option>
                </select>

                <label for="advSortOrder">Порядок:</label>
                <select id="advSortOrder" class="pixel-select select-modern">
                    <option value="asc">По возрастанию</option>
                    <option value="desc">По убыванию</option>
                </select>
            </div>
        </div>

        <div class="filters-section">
            <h3>Фильтры</h3>

            <div class="filter-row">
                <label for="advRarity">Редкость:</label>
                <select id="advRarity" class="pixel-select select-modern">
                    <option value="all">Все</option>
                    <option value="common">Обычный</option>
                    <option value="uncommon">Необычный</option>
                    <option value="rare">Редкий</option>
                    <option value="epic">Эпический</option>
                    <option value="legendary">Легендарный</option>
                </select>
            </div>

            <div class="filter-row">
                <label for="advDeadline">Дедлайн:</label>
                <select id="advDeadline" class="pixel-select select-modern">
                    <option value="all">Все</option>
                    <option value="today">Сегодня</option>
                    <option value="tomorrow">Завтра</option>
                    <option value="week">На этой неделе</option>
                    <option value="future">Будущие</option>
                    <option value="overdue">Просроченные</option>
                </select>
            </div>

            <div class="filter-row">
                <label for="advAuthor">Автор:</label>
                <input type="text" id="advAuthor" placeholder="Фильтр по автору" class="pixel-input input-modern">
            </div>
        </div>

        <div class="filters-section">
            <h3>Текстовый поиск</h3>
            <label for="advSearchQuery" class="sr-only">Текстовый поиск</label>
            <input type="text" id="advSearchQuery" placeholder="Введите поисковый запрос..." class="pixel-input input-modern">

            <div class="search-options">
                <label class="custom-checkbox">
                    <input type="checkbox" id="searchInTitle" checked>
                    В названиях
                </label>
                <label class="custom-checkbox">
                    <input type="checkbox" id="searchInDescription" checked>
                    В описаниях
                </label>
                <label class="custom-checkbox">
                    <input type="checkbox" id="searchInAuthor">
                    В авторах
                </label>
            </div>
        </div>

        <div class="modal-actions">
            <button id="resetFilters" class="pixel-button secondary">Сбросить</button>
            <button id="applyAdvancedFilters" class="pixel-button">Применить</button>
        </div>
    </div>
</div>
{% endblock %}
