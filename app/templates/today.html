{% extends "base.html" %}
{% block content %}
<script src="{{ url_for('static', path='js/today.js') }}" defer></script>
<h2>–ü–ª–∞–Ω –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>

<div class="today-container">
  {% for quest in quests_for_approve %}
  <div class="today-card {{get_class(quest.rarity)}}" onclick="openModal({{quest.id}})">
    <div class="today-card-header">
      <h3 class="today-card-title">{{ quest.title }}</h3>
      <div class="today-card-meta">
        <span class="today-card-author">–û—Ç: {{quest.author}}</span>
        <span class="today-card-deadline">‚è± {{ quest.deadline if quest.deadline else '–±–µ—Å—Å—Ä–æ—á–Ω–æ' }}</span>
      </div>
    </div>

    <div class="today-card-description">
      {{ quest.description }}
    </div>

    <div class="today-card-actions">
      <form action="/today/quest/{{ quest.id }}" method="post" class="today-form">
        <button type="submit" class="pixel-button accept-btn">‚úî –ü—Ä–∏–Ω—è—Ç—å</button>
      </form>
      <form action="/today/quest/{{ quest.id }}" method="post" class="today-form">
        <input type="hidden" name="_method" value="DELETE">
        <button type="submit" class="pixel-button decline-btn">‚úò –û—Ç–ª–æ–∂–∏—Ç—å</button>
      </form>
    </div>
  </div>
  {% endfor %}
  {% for quest in quests %}
  <div class="today-card {{get_class(quest.rarity)}}" onclick="openModal({{quest.id}})">
    <div class="today-card-header">
      <h3 class="today-card-title">{{ quest.title }}</h3>
      <div class="today-card-meta">
        <span class="today-card-author">–û—Ç: {{quest.author}}</span>
        <span class="today-card-deadline">‚è± {{ quest.deadline if quest.deadline else '–±–µ—Å—Å—Ä–æ—á–Ω–æ' }}</span>
      </div>
    </div>

    <div class="today-card-description">
      {{ quest.description }}
    </div>
  </div>
  {% else %}
  <div class="today-empty">
    <div class="today-empty-icon">üéâ</div>
    <p>–°–µ–≥–æ–¥–Ω—è –∑–∞–¥–∞—á –Ω–µ—Ç ‚Äî —Ç—ã —Å–≤–æ–±–æ–¥–µ–Ω!</p>
  </div>
  {% endfor %}
</div>

<div class="modal" id="modal">
  <div class="modal-content">
    <h2 class="modal-title" id="modalTitle"></h2>
    <div class="modal-author" id="modalAuthor"></div>
    <div class="modal-deadline" id="modalDeadline"></div>
    <p class="modal-text" id="modalText"></p>
    <span class="modal-type" id="modalType"></span>
  </div>
</div>
{% endblock %}